import{d as J,r as _,u as Q,c as m,a as l,b as e,h as W,w as a,e as r,l as D,f as d,g as Y,i as c,o as u,t as y,j as $,v as B,F as V,k as I,m as Z}from"./app-BNL6yBpj.js";import{_ as ee}from"./AppLayout.vue_vue_type_script_setup_true_lang-B1YP6mHh.js";import{_ as F,a as A}from"./CardContent.vue_vue_type_script_setup_true_lang-ChgRXIJl.js";import{_ as E,a as T}from"./CardTitle.vue_vue_type_script_setup_true_lang-VNAzxZ0O.js";import{_ as v}from"./index-LkZ3l7_t.js";import{_ as f}from"./Input.vue_vue_type_script_setup_true_lang-Bnp9nIXL.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-D1BDS_TB.js";import{_ as P}from"./Checkbox.vue_vue_type_script_setup_true_lang-PiBR2vex.js";import{A as te}from"./arrow-left-DF3cYG79.js";import{X as j}from"./x-CTgYV9Wi.js";import"./utils-kKsk6u8f.js";import"./index-Bgd5ffrM.js";import"./VisuallyHidden-CV_5suY1.js";import"./useForwardExpose-BI-Vxx6w.js";import"./useForwardPropsEmits-DjVx8U1f.js";import"./index-KXJrcCIR.js";import"./createLucideIcon-CvYpObmL.js";import"./globe-ibZpHMLy.js";import"./file-text-D7GmGOl_.js";import"./calendar-Yvk0uyD6.js";import"./check-Z_yB87iK.js";const le={class:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4"},se={class:"flex items-center justify-between"},ae={class:"grid gap-6"},oe={class:"grid gap-2"},re={key:0,class:"text-sm text-destructive"},de={class:"grid gap-2"},ie={key:0,class:"text-sm text-destructive"},ue={class:"grid gap-2"},ne={class:"grid gap-2"},me={key:0,class:"text-sm text-destructive"},ge={class:"grid gap-2"},pe={key:0,class:"relative"},fe=["src"],_e={key:1},ce={key:2,class:"text-sm text-destructive"},ve={class:"grid gap-4 md:grid-cols-2"},be={class:"grid gap-2"},xe={class:"grid gap-2"},ye={class:"grid gap-2"},he={class:"grid gap-2"},ke={class:"space-y-2"},we={class:"grid gap-2"},Ve={key:0,class:"grid grid-cols-2 gap-4 md:grid-cols-4 mb-4"},Ue=["src","alt"],Ce={key:1,class:"grid grid-cols-2 gap-4 md:grid-cols-4 mb-4"},$e=["src","alt"],Be={key:2,class:"text-sm text-destructive"},Ie={class:"flex items-center gap-4"},Fe={class:"flex items-center gap-2"},Ae={class:"flex items-center gap-2"},Ee={class:"grid gap-2"},Te={class:"grid gap-2"},je={class:"grid gap-2"},Me={class:"flex items-center justify-end gap-4"},st=J({__name:"Edit",props:{blog:{}},setup(z){const i=z,N=[{title:"Dashboard",href:"/cp/dashboard"},{title:"Blogs",href:"/cp/blogs"},{title:"Edit",href:"#"}],b=_(i.blog.tags&&i.blog.tags.length>0?[...i.blog.tags]:[""]),R=()=>{b.value.push("")},L=g=>{b.value.splice(g,1)},M=_(null),h=_(i.blog.featured_image),U=_(!1),k=_(i.blog.images||[]),C=_([]),S=_([]),w=_([]),s=Q({title:i.blog.title,slug:i.blog.slug,excerpt:i.blog.excerpt||"",content:i.blog.content,featured_image:null,images:[],author:i.blog.author||"",published_at:i.blog.published_at||"",is_published:i.blog.is_published,is_featured:i.blog.is_featured,category:i.blog.category||"",tags:i.blog.tags||[],meta_title:i.blog.meta_title||"",meta_description:i.blog.meta_description||"",meta_keywords:i.blog.meta_keywords||"",remove_featured_image:!1,remove_images:[]}),O=g=>{const t=g.target;if(t.files&&t.files[0]){M.value=t.files[0],s.featured_image=t.files[0],s.remove_featured_image=!1,U.value=!1;const o=new FileReader;o.onload=n=>{h.value=n.target?.result},o.readAsDataURL(t.files[0])}},q=()=>{M.value=null,h.value=null,s.featured_image=null,s.remove_featured_image=!0,U.value=!0},K=g=>{const t=g.target;t.files&&Array.from(t.files).forEach(o=>{S.value.push(o),s.images.push(o);const n=new FileReader;n.onload=x=>{w.value.push(x.target?.result)},n.readAsDataURL(o)})},X=g=>{k.value=k.value.filter(t=>t!==g),C.value.push(g),s.remove_images=C.value},G=g=>{S.value.splice(g,1),w.value.splice(g,1),s.images.splice(g,1)},H=()=>{s.tags=b.value.filter(g=>g.trim()!==""),s.remove_images=C.value,s.put(`/cp/blogs/${i.blog.id}`,{preserveScroll:!0,forceFormData:!0})};return(g,t)=>(u(),m(V,null,[l(e(W),{title:"Edit Blog Post"}),l(ee,{breadcrumbs:N},{default:a(()=>[r("div",le,[r("div",se,[t[13]||(t[13]=r("div",null,[r("h1",{class:"text-2xl font-bold"},"Edit Blog Post"),r("p",{class:"text-muted-foreground"},"Update blog post information")],-1)),l(e(v),{variant:"outline","as-child":""},{default:a(()=>[l(e(D),{href:"/cp/blogs"},{default:a(()=>[l(e(te),{class:"mr-2 h-4 w-4"}),t[12]||(t[12]=d(" Back ",-1))]),_:1})]),_:1})]),r("form",{onSubmit:Y(H,["prevent"])},[r("div",ae,[l(e(F),null,{default:a(()=>[l(e(E),null,{default:a(()=>[l(e(T),null,{default:a(()=>[...t[14]||(t[14]=[d("Basic Information",-1)])]),_:1})]),_:1}),l(e(A),{class:"space-y-4"},{default:a(()=>[r("div",oe,[l(e(p),{for:"title"},{default:a(()=>[...t[15]||(t[15]=[d("Title *",-1)])]),_:1}),l(e(f),{id:"title",modelValue:e(s).title,"onUpdate:modelValue":t[0]||(t[0]=o=>e(s).title=o),required:"",placeholder:"Blog Post Title"},null,8,["modelValue"]),e(s).errors.title?(u(),m("p",re,y(e(s).errors.title),1)):c("",!0)]),r("div",de,[l(e(p),{for:"slug"},{default:a(()=>[...t[16]||(t[16]=[d("Slug",-1)])]),_:1}),l(e(f),{id:"slug",modelValue:e(s).slug,"onUpdate:modelValue":t[1]||(t[1]=o=>e(s).slug=o),placeholder:"blog-post-slug"},null,8,["modelValue"]),e(s).errors.slug?(u(),m("p",ie,y(e(s).errors.slug),1)):c("",!0)]),r("div",ue,[l(e(p),{for:"excerpt"},{default:a(()=>[...t[17]||(t[17]=[d("Excerpt",-1)])]),_:1}),$(r("textarea",{id:"excerpt","onUpdate:modelValue":t[2]||(t[2]=o=>e(s).excerpt=o),rows:"3",class:"min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-xs",placeholder:"Short excerpt or summary"},null,512),[[B,e(s).excerpt]])]),r("div",ne,[l(e(p),{for:"content"},{default:a(()=>[...t[18]||(t[18]=[d("Content *",-1)])]),_:1}),$(r("textarea",{id:"content","onUpdate:modelValue":t[3]||(t[3]=o=>e(s).content=o),required:"",rows:"12",class:"min-h-[240px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-xs",placeholder:"Blog post content"},null,512),[[B,e(s).content]]),e(s).errors.content?(u(),m("p",me,y(e(s).errors.content),1)):c("",!0)])]),_:1})]),_:1}),l(e(F),null,{default:a(()=>[l(e(E),null,{default:a(()=>[l(e(T),null,{default:a(()=>[...t[19]||(t[19]=[d("Media & Metadata",-1)])]),_:1})]),_:1}),l(e(A),{class:"space-y-4"},{default:a(()=>[r("div",ge,[l(e(p),{for:"featured_image"},{default:a(()=>[...t[20]||(t[20]=[d("Featured Image",-1)])]),_:1}),h.value&&!U.value?(u(),m("div",pe,[r("img",{src:h.value,alt:"Featured image preview",class:"h-48 w-full rounded-lg object-cover"},null,8,fe),l(e(v),{type:"button",variant:"destructive",size:"icon",class:"absolute right-2 top-2",onClick:q},{default:a(()=>[l(e(j),{class:"h-4 w-4"})]),_:1})])):(u(),m("div",_e,[l(e(f),{id:"featured_image",type:"file",accept:"image/*",onChange:O}),t[21]||(t[21]=r("p",{class:"mt-1 text-xs text-muted-foreground"}," Upload a featured image (max 2MB, jpeg, png, jpg, gif, webp) ",-1))])),e(s).errors.featured_image?(u(),m("p",ce,y(e(s).errors.featured_image),1)):c("",!0)]),r("div",ve,[r("div",be,[l(e(p),{for:"author"},{default:a(()=>[...t[22]||(t[22]=[d("Author",-1)])]),_:1}),l(e(f),{id:"author",modelValue:e(s).author,"onUpdate:modelValue":t[4]||(t[4]=o=>e(s).author=o),placeholder:"Author name"},null,8,["modelValue"])]),r("div",xe,[l(e(p),{for:"category"},{default:a(()=>[...t[23]||(t[23]=[d("Category",-1)])]),_:1}),l(e(f),{id:"category",modelValue:e(s).category,"onUpdate:modelValue":t[5]||(t[5]=o=>e(s).category=o),placeholder:"Blog category"},null,8,["modelValue"])]),r("div",ye,[l(e(p),{for:"published_at"},{default:a(()=>[...t[24]||(t[24]=[d("Published Date",-1)])]),_:1}),l(e(f),{id:"published_at",modelValue:e(s).published_at,"onUpdate:modelValue":t[6]||(t[6]=o=>e(s).published_at=o),type:"date"},null,8,["modelValue"])])]),r("div",he,[l(e(p),null,{default:a(()=>[...t[25]||(t[25]=[d("Tags",-1)])]),_:1}),r("div",ke,[(u(!0),m(V,null,I(b.value,(o,n)=>(u(),m("div",{key:n,class:"flex gap-2"},[l(e(f),{modelValue:b.value[n],"onUpdate:modelValue":x=>b.value[n]=x,placeholder:"Tag name"},null,8,["modelValue","onUpdate:modelValue"]),b.value.length>1?(u(),Z(e(v),{key:0,type:"button",variant:"outline",size:"icon",onClick:x=>L(n)},{default:a(()=>[...t[26]||(t[26]=[d(" Ã— ",-1)])]),_:1},8,["onClick"])):c("",!0)]))),128)),l(e(v),{type:"button",variant:"outline",size:"sm",onClick:R},{default:a(()=>[...t[27]||(t[27]=[d(" + Add Tag ",-1)])]),_:1})])]),r("div",we,[l(e(p),null,{default:a(()=>[...t[28]||(t[28]=[d("Additional Images",-1)])]),_:1}),k.value.length>0?(u(),m("div",Ve,[(u(!0),m(V,null,I(k.value,(o,n)=>(u(),m("div",{key:n,class:"relative"},[r("img",{src:o,alt:`Image ${n+1}`,class:"h-32 w-full rounded-lg object-cover"},null,8,Ue),l(e(v),{type:"button",variant:"destructive",size:"icon",class:"absolute right-2 top-2",onClick:x=>X(o)},{default:a(()=>[l(e(j),{class:"h-4 w-4"})]),_:1},8,["onClick"])]))),128))])):c("",!0),w.value.length>0?(u(),m("div",Ce,[(u(!0),m(V,null,I(w.value,(o,n)=>(u(),m("div",{key:`new-${n}`,class:"relative"},[r("img",{src:o,alt:`New image ${n+1}`,class:"h-32 w-full rounded-lg object-cover"},null,8,$e),l(e(v),{type:"button",variant:"destructive",size:"icon",class:"absolute right-2 top-2",onClick:x=>G(n)},{default:a(()=>[l(e(j),{class:"h-4 w-4"})]),_:1},8,["onClick"])]))),128))])):c("",!0),l(e(f),{id:"additional_images",type:"file",accept:"image/*",multiple:"",onChange:K}),t[29]||(t[29]=r("p",{class:"text-xs text-muted-foreground"}," Upload additional images (max 2MB each, jpeg, png, jpg, gif, webp) ",-1)),e(s).errors.images?(u(),m("p",Be,y(e(s).errors.images),1)):c("",!0)]),r("div",Ie,[r("div",Fe,[l(e(P),{id:"is_published",checked:e(s).is_published,"onUpdate:checked":t[7]||(t[7]=o=>e(s).is_published=o)},null,8,["checked"]),l(e(p),{for:"is_published"},{default:a(()=>[...t[30]||(t[30]=[d("Published",-1)])]),_:1})]),r("div",Ae,[l(e(P),{id:"is_featured",checked:e(s).is_featured,"onUpdate:checked":t[8]||(t[8]=o=>e(s).is_featured=o)},null,8,["checked"]),l(e(p),{for:"is_featured"},{default:a(()=>[...t[31]||(t[31]=[d("Featured",-1)])]),_:1})])])]),_:1})]),_:1}),l(e(F),null,{default:a(()=>[l(e(E),null,{default:a(()=>[l(e(T),null,{default:a(()=>[...t[32]||(t[32]=[d("SEO Settings",-1)])]),_:1})]),_:1}),l(e(A),{class:"space-y-4"},{default:a(()=>[r("div",Ee,[l(e(p),{for:"meta_title"},{default:a(()=>[...t[33]||(t[33]=[d("Meta Title",-1)])]),_:1}),l(e(f),{id:"meta_title",modelValue:e(s).meta_title,"onUpdate:modelValue":t[9]||(t[9]=o=>e(s).meta_title=o),placeholder:"SEO meta title"},null,8,["modelValue"])]),r("div",Te,[l(e(p),{for:"meta_description"},{default:a(()=>[...t[34]||(t[34]=[d("Meta Description",-1)])]),_:1}),$(r("textarea",{id:"meta_description","onUpdate:modelValue":t[10]||(t[10]=o=>e(s).meta_description=o),rows:"3",class:"min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-xs",placeholder:"SEO meta description"},null,512),[[B,e(s).meta_description]])]),r("div",je,[l(e(p),{for:"meta_keywords"},{default:a(()=>[...t[35]||(t[35]=[d("Meta Keywords",-1)])]),_:1}),l(e(f),{id:"meta_keywords",modelValue:e(s).meta_keywords,"onUpdate:modelValue":t[11]||(t[11]=o=>e(s).meta_keywords=o),placeholder:"keyword1, keyword2, keyword3"},null,8,["modelValue"])])]),_:1})]),_:1}),r("div",Me,[l(e(v),{type:"button",variant:"outline","as-child":""},{default:a(()=>[l(e(D),{href:"/cp/blogs"},{default:a(()=>[...t[36]||(t[36]=[d("Cancel",-1)])]),_:1})]),_:1}),l(e(v),{type:"submit",disabled:e(s).processing},{default:a(()=>[d(y(e(s).processing?"Updating...":"Update Blog Post"),1)]),_:1},8,["disabled"])])])],32)])]),_:1})],64))}});export{st as default};
