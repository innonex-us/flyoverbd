import{d as Q,r as c,u as W,c as m,a as l,b as e,h as Y,w as a,e as r,l as P,f as d,g as Z,i as v,o as u,t as y,j as $,v as B,F as V,k as I,m as ee}from"./app-CP1-r0BK.js";import{_ as te}from"./AppLayout.vue_vue_type_script_setup_true_lang-VNpVqBxi.js";import{_ as F,a as A}from"./CardContent.vue_vue_type_script_setup_true_lang-CtDX4IYL.js";import{_ as E,a as T}from"./CardTitle.vue_vue_type_script_setup_true_lang-B3wlGP_E.js";import{_ as b}from"./index-DjTBur_r.js";import{_ as f}from"./Input.vue_vue_type_script_setup_true_lang-juG8Vjrp.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-DVwlMnRU.js";import{_ as z}from"./Checkbox.vue_vue_type_script_setup_true_lang-DhBZUUqI.js";import{A as le}from"./arrow-left-ouJZ_71H.js";import{X as j}from"./x-CrZJWNU5.js";import"./utils-DeuSH4bP.js";import"./index--o4npdfR.js";import"./VisuallyHidden-C_2pfeLD.js";import"./useForwardExpose-BJ4IusGi.js";import"./useForwardPropsEmits-Ci4uCAMk.js";import"./index-4t0c7qAK.js";import"./createLucideIcon-ChUeGeV6.js";import"./globe-DmCuXhUi.js";import"./file-text-CaCxU_Dl.js";import"./calendar-CyO_6aHN.js";import"./check-BvjNkrB1.js";const se={class:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-4"},ae={class:"flex items-center justify-between"},oe={class:"grid gap-6"},re={class:"grid gap-2"},de={key:0,class:"text-sm text-destructive"},ie={class:"grid gap-2"},ue={key:0,class:"text-sm text-destructive"},ne={class:"grid gap-2"},me={class:"grid gap-2"},ge={key:0,class:"text-sm text-destructive"},pe={class:"grid gap-2"},fe={key:0,class:"relative"},_e=["src"],ce={key:1},ve={key:2,class:"text-sm text-destructive"},be={class:"grid gap-4 md:grid-cols-2"},xe={class:"grid gap-2"},ye={class:"grid gap-2"},he={class:"grid gap-2"},ke={class:"grid gap-2"},we={class:"space-y-2"},Ve={class:"grid gap-2"},Ue={key:0,class:"grid grid-cols-2 gap-4 md:grid-cols-4 mb-4"},Ce=["src","alt"],$e={key:1,class:"grid grid-cols-2 gap-4 md:grid-cols-4 mb-4"},Be=["src","alt"],Ie={key:2,class:"text-sm text-destructive"},Fe={class:"flex items-center gap-4"},Ae={class:"flex items-center gap-2"},Ee={class:"flex items-center gap-2"},Te={class:"grid gap-2"},je={class:"grid gap-2"},Me={class:"grid gap-2"},Se={class:"flex items-center justify-end gap-4"},at=Q({__name:"Edit",props:{blog:{}},setup(N){const i=N,R=[{title:"Dashboard",href:"/cp/dashboard"},{title:"Blogs",href:"/cp/blogs"},{title:"Edit",href:"#"}],x=c(i.blog.tags&&i.blog.tags.length>0?[...i.blog.tags]:[""]),L=()=>{x.value.push("")},O=g=>{x.value.splice(g,1)},M=c(null),h=c(i.blog.featured_image),U=c(!1),k=c(i.blog.images||[]),C=c([]),S=c([]),w=c([]),s=W({title:i.blog.title,slug:i.blog.slug,excerpt:i.blog.excerpt||"",content:i.blog.content,featured_image:null,images:[],author:i.blog.author||"",published_at:i.blog.published_at||"",is_published:i.blog.is_published,is_featured:i.blog.is_featured,category:i.blog.category||"",tags:i.blog.tags||[],meta_title:i.blog.meta_title||"",meta_description:i.blog.meta_description||"",meta_keywords:i.blog.meta_keywords||"",remove_featured_image:!1,remove_images:[]}),q=g=>{const t=g.target;if(t.files&&t.files[0]){M.value=t.files[0],s.featured_image=t.files[0],s.remove_featured_image=!1,U.value=!1;const o=new FileReader;o.onload=n=>{var _;h.value=(_=n.target)==null?void 0:_.result},o.readAsDataURL(t.files[0])}},K=()=>{M.value=null,h.value=null,s.featured_image=null,s.remove_featured_image=!0,U.value=!0},X=g=>{const t=g.target;t.files&&Array.from(t.files).forEach(o=>{S.value.push(o),s.images.push(o);const n=new FileReader;n.onload=_=>{var D;w.value.push((D=_.target)==null?void 0:D.result)},n.readAsDataURL(o)})},G=g=>{k.value=k.value.filter(t=>t!==g),C.value.push(g),s.remove_images=C.value},H=g=>{S.value.splice(g,1),w.value.splice(g,1),s.images.splice(g,1)},J=()=>{s.tags=x.value.filter(g=>g.trim()!==""),s.remove_images=C.value,s.put(`/cp/blogs/${i.blog.id}`,{preserveScroll:!0,forceFormData:!0})};return(g,t)=>(u(),m(V,null,[l(e(Y),{title:"Edit Blog Post"}),l(te,{breadcrumbs:R},{default:a(()=>[r("div",se,[r("div",ae,[t[13]||(t[13]=r("div",null,[r("h1",{class:"text-2xl font-bold"},"Edit Blog Post"),r("p",{class:"text-muted-foreground"},"Update blog post information")],-1)),l(e(b),{variant:"outline","as-child":""},{default:a(()=>[l(e(P),{href:"/cp/blogs"},{default:a(()=>[l(e(le),{class:"mr-2 h-4 w-4"}),t[12]||(t[12]=d(" Back ",-1))]),_:1})]),_:1})]),r("form",{onSubmit:Z(J,["prevent"])},[r("div",oe,[l(e(F),null,{default:a(()=>[l(e(E),null,{default:a(()=>[l(e(T),null,{default:a(()=>[...t[14]||(t[14]=[d("Basic Information",-1)])]),_:1})]),_:1}),l(e(A),{class:"space-y-4"},{default:a(()=>[r("div",re,[l(e(p),{for:"title"},{default:a(()=>[...t[15]||(t[15]=[d("Title *",-1)])]),_:1}),l(e(f),{id:"title",modelValue:e(s).title,"onUpdate:modelValue":t[0]||(t[0]=o=>e(s).title=o),required:"",placeholder:"Blog Post Title"},null,8,["modelValue"]),e(s).errors.title?(u(),m("p",de,y(e(s).errors.title),1)):v("",!0)]),r("div",ie,[l(e(p),{for:"slug"},{default:a(()=>[...t[16]||(t[16]=[d("Slug",-1)])]),_:1}),l(e(f),{id:"slug",modelValue:e(s).slug,"onUpdate:modelValue":t[1]||(t[1]=o=>e(s).slug=o),placeholder:"blog-post-slug"},null,8,["modelValue"]),e(s).errors.slug?(u(),m("p",ue,y(e(s).errors.slug),1)):v("",!0)]),r("div",ne,[l(e(p),{for:"excerpt"},{default:a(()=>[...t[17]||(t[17]=[d("Excerpt",-1)])]),_:1}),$(r("textarea",{id:"excerpt","onUpdate:modelValue":t[2]||(t[2]=o=>e(s).excerpt=o),rows:"3",class:"min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-xs",placeholder:"Short excerpt or summary"},null,512),[[B,e(s).excerpt]])]),r("div",me,[l(e(p),{for:"content"},{default:a(()=>[...t[18]||(t[18]=[d("Content *",-1)])]),_:1}),$(r("textarea",{id:"content","onUpdate:modelValue":t[3]||(t[3]=o=>e(s).content=o),required:"",rows:"12",class:"min-h-[240px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-xs",placeholder:"Blog post content"},null,512),[[B,e(s).content]]),e(s).errors.content?(u(),m("p",ge,y(e(s).errors.content),1)):v("",!0)])]),_:1})]),_:1}),l(e(F),null,{default:a(()=>[l(e(E),null,{default:a(()=>[l(e(T),null,{default:a(()=>[...t[19]||(t[19]=[d("Media & Metadata",-1)])]),_:1})]),_:1}),l(e(A),{class:"space-y-4"},{default:a(()=>[r("div",pe,[l(e(p),{for:"featured_image"},{default:a(()=>[...t[20]||(t[20]=[d("Featured Image",-1)])]),_:1}),h.value&&!U.value?(u(),m("div",fe,[r("img",{src:h.value,alt:"Featured image preview",class:"h-48 w-full rounded-lg object-cover"},null,8,_e),l(e(b),{type:"button",variant:"destructive",size:"icon",class:"absolute right-2 top-2",onClick:K},{default:a(()=>[l(e(j),{class:"h-4 w-4"})]),_:1})])):(u(),m("div",ce,[l(e(f),{id:"featured_image",type:"file",accept:"image/*",onChange:q}),t[21]||(t[21]=r("p",{class:"mt-1 text-xs text-muted-foreground"}," Upload a featured image (max 2MB, jpeg, png, jpg, gif, webp) ",-1))])),e(s).errors.featured_image?(u(),m("p",ve,y(e(s).errors.featured_image),1)):v("",!0)]),r("div",be,[r("div",xe,[l(e(p),{for:"author"},{default:a(()=>[...t[22]||(t[22]=[d("Author",-1)])]),_:1}),l(e(f),{id:"author",modelValue:e(s).author,"onUpdate:modelValue":t[4]||(t[4]=o=>e(s).author=o),placeholder:"Author name"},null,8,["modelValue"])]),r("div",ye,[l(e(p),{for:"category"},{default:a(()=>[...t[23]||(t[23]=[d("Category",-1)])]),_:1}),l(e(f),{id:"category",modelValue:e(s).category,"onUpdate:modelValue":t[5]||(t[5]=o=>e(s).category=o),placeholder:"Blog category"},null,8,["modelValue"])]),r("div",he,[l(e(p),{for:"published_at"},{default:a(()=>[...t[24]||(t[24]=[d("Published Date",-1)])]),_:1}),l(e(f),{id:"published_at",modelValue:e(s).published_at,"onUpdate:modelValue":t[6]||(t[6]=o=>e(s).published_at=o),type:"date"},null,8,["modelValue"])])]),r("div",ke,[l(e(p),null,{default:a(()=>[...t[25]||(t[25]=[d("Tags",-1)])]),_:1}),r("div",we,[(u(!0),m(V,null,I(x.value,(o,n)=>(u(),m("div",{key:n,class:"flex gap-2"},[l(e(f),{modelValue:x.value[n],"onUpdate:modelValue":_=>x.value[n]=_,placeholder:"Tag name"},null,8,["modelValue","onUpdate:modelValue"]),x.value.length>1?(u(),ee(e(b),{key:0,type:"button",variant:"outline",size:"icon",onClick:_=>O(n)},{default:a(()=>[...t[26]||(t[26]=[d(" Ã— ",-1)])]),_:1},8,["onClick"])):v("",!0)]))),128)),l(e(b),{type:"button",variant:"outline",size:"sm",onClick:L},{default:a(()=>[...t[27]||(t[27]=[d(" + Add Tag ",-1)])]),_:1})])]),r("div",Ve,[l(e(p),null,{default:a(()=>[...t[28]||(t[28]=[d("Additional Images",-1)])]),_:1}),k.value.length>0?(u(),m("div",Ue,[(u(!0),m(V,null,I(k.value,(o,n)=>(u(),m("div",{key:n,class:"relative"},[r("img",{src:o,alt:`Image ${n+1}`,class:"h-32 w-full rounded-lg object-cover"},null,8,Ce),l(e(b),{type:"button",variant:"destructive",size:"icon",class:"absolute right-2 top-2",onClick:_=>G(o)},{default:a(()=>[l(e(j),{class:"h-4 w-4"})]),_:1},8,["onClick"])]))),128))])):v("",!0),w.value.length>0?(u(),m("div",$e,[(u(!0),m(V,null,I(w.value,(o,n)=>(u(),m("div",{key:`new-${n}`,class:"relative"},[r("img",{src:o,alt:`New image ${n+1}`,class:"h-32 w-full rounded-lg object-cover"},null,8,Be),l(e(b),{type:"button",variant:"destructive",size:"icon",class:"absolute right-2 top-2",onClick:_=>H(n)},{default:a(()=>[l(e(j),{class:"h-4 w-4"})]),_:1},8,["onClick"])]))),128))])):v("",!0),l(e(f),{id:"additional_images",type:"file",accept:"image/*",multiple:"",onChange:X}),t[29]||(t[29]=r("p",{class:"text-xs text-muted-foreground"}," Upload additional images (max 2MB each, jpeg, png, jpg, gif, webp) ",-1)),e(s).errors.images?(u(),m("p",Ie,y(e(s).errors.images),1)):v("",!0)]),r("div",Fe,[r("div",Ae,[l(e(z),{id:"is_published",checked:e(s).is_published,"onUpdate:checked":t[7]||(t[7]=o=>e(s).is_published=o)},null,8,["checked"]),l(e(p),{for:"is_published"},{default:a(()=>[...t[30]||(t[30]=[d("Published",-1)])]),_:1})]),r("div",Ee,[l(e(z),{id:"is_featured",checked:e(s).is_featured,"onUpdate:checked":t[8]||(t[8]=o=>e(s).is_featured=o)},null,8,["checked"]),l(e(p),{for:"is_featured"},{default:a(()=>[...t[31]||(t[31]=[d("Featured",-1)])]),_:1})])])]),_:1})]),_:1}),l(e(F),null,{default:a(()=>[l(e(E),null,{default:a(()=>[l(e(T),null,{default:a(()=>[...t[32]||(t[32]=[d("SEO Settings",-1)])]),_:1})]),_:1}),l(e(A),{class:"space-y-4"},{default:a(()=>[r("div",Te,[l(e(p),{for:"meta_title"},{default:a(()=>[...t[33]||(t[33]=[d("Meta Title",-1)])]),_:1}),l(e(f),{id:"meta_title",modelValue:e(s).meta_title,"onUpdate:modelValue":t[9]||(t[9]=o=>e(s).meta_title=o),placeholder:"SEO meta title"},null,8,["modelValue"])]),r("div",je,[l(e(p),{for:"meta_description"},{default:a(()=>[...t[34]||(t[34]=[d("Meta Description",-1)])]),_:1}),$(r("textarea",{id:"meta_description","onUpdate:modelValue":t[10]||(t[10]=o=>e(s).meta_description=o),rows:"3",class:"min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-xs",placeholder:"SEO meta description"},null,512),[[B,e(s).meta_description]])]),r("div",Me,[l(e(p),{for:"meta_keywords"},{default:a(()=>[...t[35]||(t[35]=[d("Meta Keywords",-1)])]),_:1}),l(e(f),{id:"meta_keywords",modelValue:e(s).meta_keywords,"onUpdate:modelValue":t[11]||(t[11]=o=>e(s).meta_keywords=o),placeholder:"keyword1, keyword2, keyword3"},null,8,["modelValue"])])]),_:1})]),_:1}),r("div",Se,[l(e(b),{type:"button",variant:"outline","as-child":""},{default:a(()=>[l(e(P),{href:"/cp/blogs"},{default:a(()=>[...t[36]||(t[36]=[d("Cancel",-1)])]),_:1})]),_:1}),l(e(b),{type:"submit",disabled:e(s).processing},{default:a(()=>[d(y(e(s).processing?"Updating...":"Update Blog Post"),1)]),_:1},8,["disabled"])])])],32)])]),_:1})],64))}});export{at as default};
