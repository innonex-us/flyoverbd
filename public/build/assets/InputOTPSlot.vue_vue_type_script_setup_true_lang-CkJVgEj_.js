import{b as ee,a as Te}from"./useForwardPropsEmits-Ci4uCAMk.js";import{c as te}from"./utils-DeuSH4bP.js";import{d as z,af as de,ag as Ce,y as V,R as I,x as me,B as ve,I as fe,K as Me,ab as Ae,c as U,m as ge,i as he,e as K,b as x,M as ne,E as X,z as Re,q as De,F as Fe,a5 as Ie,r as q,$ as Ve,o as W,w as We,G as $e,H as He,f as Oe,t as je}from"./app-CP1-r0BK.js";import{q as ze,p as Le,u as Ge,n as A,l as Y}from"./index--o4npdfR.js";const Ne=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`,qe=z({props:{fallback:{type:String,required:!0}},setup(s){return()=>Ve("noscript",{innerHTML:`<style>${s.fallback}</style>`})}}),be=Symbol("vue-otp-context");function Ke(s){return[setTimeout(s,0),setTimeout(s,10),setTimeout(s,50)]}const Ue=18,ye=40,Xe=`${ye}px`,Ye=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function Je({containerRef:s,inputRef:f,pushPasswordManagerStrategy:d,isFocused:n}){const i=q({done:!1,refocused:!1}),a=q(!1),y=q(!1),m=q(!1),S=V(()=>d==="none"?!1:(d==="increase-width"||d==="experimental-no-flickering")&&a.value&&y.value),v=()=>{const l=s.value,h=f.value;if(!l||!h||m.value||d==="none")return;const k=l,B=k.getBoundingClientRect().left+k.offsetWidth,P=k.getBoundingClientRect().top+k.offsetHeight/2,E=B-Ue,$=P;if(!(document.querySelectorAll(Ye).length===0&&document.elementFromPoint(E,$)===l)&&(a.value=!0,m.value=!0,!i.value.refocused&&document.activeElement===h)){const R=[h.selectionStart,h.selectionEnd];h.blur(),h.focus(),h.setSelectionRange(R[0],R[1]),i.value.refocused=!0}},p=()=>{const l=s.value;!l||d==="none"||(y.value=window.innerWidth-l.getBoundingClientRect().right>=ye)};let g;return me(()=>{p(),g=setInterval(p,1e3)}),ve(()=>{clearInterval(g)}),fe([n,f],(l,h,k)=>{const[B,P]=l,E=B||document.activeElement===P;if(d==="none"||!E)return;const $=setTimeout(v,0),R=setTimeout(v,2e3),J=setTimeout(v,5e3),Q=setTimeout(()=>{m.value=!0},6e3);k(()=>{clearTimeout($),clearTimeout(R),clearTimeout(J),clearTimeout(Q)})}),{hasPWMBadge:a,willPushPWMBadge:S,PWM_BADGE_SPACE_WIDTH:Xe}}const Qe={style:{position:"absolute",inset:"0","pointer-events":"none"}},Ze=["value","data-input-otp-placeholder-shown","data-input-otp-mss","data-input-otp-mse","aria-placeholder","pattern"],et=z({name:"OTPInput",inheritAttrs:!1,__name:"OTPInput",props:de({maxlength:{},textAlign:{default:"left"},inputmode:{default:"numeric"},containerClass:{},pushPasswordManagerStrategy:{default:"increase-width"},noScriptCssFallback:{default:Ne},defaultValue:{default:""},pasteTransformer:{},accept:{},alt:{},autocomplete:{default:"one-time-code"},autofocus:{type:Boolean},capture:{type:[Boolean,String]},checked:{type:[Boolean,Array,Set]},crossorigin:{},disabled:{type:Boolean},enterKeyHint:{},form:{},formaction:{},formenctype:{},formmethod:{},formnovalidate:{type:Boolean},formtarget:{},height:{},indeterminate:{type:Boolean},list:{},max:{},min:{},minlength:{},multiple:{type:Boolean},name:{},pattern:{},placeholder:{},readonly:{type:Boolean},required:{type:Boolean},size:{},src:{},step:{},type:{},value:{},width:{}},{modelValue:{default(s){return s.defaultValue}},modelModifiers:{}}),emits:de(["complete","change","select","input","focus","blur","mouseover","mouseleave","paste"],["update:modelValue"]),setup(s,{expose:f,emit:d}){var oe,L,le,se,re,ie;const n=s,i=d,[a]=Ce(s,"modelValue"),y=ze(a),m=V(()=>n.pattern?typeof n.pattern=="string"?new RegExp(n.pattern):n.pattern:null),S=I(!1),v=I(!1),p=I(null),g=I(null),l=I(null),h=I(null),k=(le=(L=(oe=Le)==null?void 0:oe.CSS)==null?void 0:L.supports)==null?void 0:le.call(L,"-webkit-touch-callout","none");let B={prev:[(se=l.value)==null?void 0:se.selectionStart,(re=l.value)==null?void 0:re.selectionEnd,(ie=l.value)==null?void 0:ie.selectionDirection]};function P(t,e){try{t.insertRule(e)}catch{console.error("input-otp could not insert CSS rule:",e)}}me(()=>{var b,H,O,j;const t=l.value,e=h.value;if(!t||!e)return;B.prev=[t.selectionStart,t.selectionEnd,t.selectionDirection??"none"];const r=Ge(A,"selectionchange",o,{capture:!0});function o(){var pe;if(!t)return;if(((pe=A)==null?void 0:pe.activeElement)!==t){p.value=null,g.value=null;return}const c=t.selectionStart,_=t.selectionEnd,Pe=t.selectionDirection,G=t.maxLength,N=t.value,D=B.prev;let T=-1,C=-1,F;if(N.length!==0&&c!==null&&_!==null){const ke=c===_,Be=c===N.length&&N.length<G;if(ke&&!Be){const M=c;if(M===0)T=0,C=1,F="forward";else if(M===G)T=M-1,C=M,F="backward";else if(G>1&&N.length>1){let Z=0;if(D[0]!==null&&D[1]!==null){F=M<D[1]?"backward":"forward";const Ee=D[0]===D[1]&&D[0]<G;F==="backward"&&!Ee&&(Z=-1)}T=Z+M,C=Z+M+1}}T!==-1&&C!==-1&&T!==C&&t.setSelectionRange(T,C,F)}const ue=T!==-1?T:c,ce=C!==-1?C:_,_e=F??Pe;p.value=ue,g.value=ce,B.prev=[ue,ce,_e]}if(o(),((b=A)==null?void 0:b.activeElement)===t&&(v.value=!0),!((H=A)!=null&&H.getElementById("input-otp-style"))){const c=(O=A)==null?void 0:O.createElement("style");if(c.id="input-otp-style",(j=A)==null||j.head.appendChild(c),c.sheet){const _="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";P(c.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),P(c.sheet,`[data-input-otp]:autofill { ${_} }`),P(c.sheet,`[data-input-otp]:-webkit-autofill { ${_} }`),P(c.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),P(c.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}const u=()=>{e&&e.style.setProperty("--root-height",`${t.clientHeight}px`)};u();const w=new ResizeObserver(u);w.observe(t),ve(()=>{r(),w.disconnect()})}),fe([a],()=>{Ke(()=>{var o,u,w,b;if(!l.value)return;(o=l.value)==null||o.dispatchEvent(new Event("input"));const t=(u=l.value)==null?void 0:u.selectionStart,e=(w=l.value)==null?void 0:w.selectionEnd,r=(b=l.value)==null?void 0:b.selectionDirection;t!==null&&e!==null&&(p.value=t??null,g.value=e??null,B.prev=[t,e,r])})},{immediate:!0}),Me(()=>{y.value!==void 0&&a.value!==y.value&&y.value.length<n.maxlength&&a.value.length===n.maxlength&&i("complete",a.value)});const E=Je({containerRef:h,inputRef:l,pushPasswordManagerStrategy:n.pushPasswordManagerStrategy,isFocused:v});function $(t){if(t.inputType==="insertText"&&t.data!==null){const e=t.currentTarget,r=e.selectionStart??0,o=e.selectionEnd??0,u=e.value,w=(r!==o?u.slice(0,r)+t.data+u.slice(o):u.slice(0,r)+t.data+u.slice(r)).slice(0,n.maxlength);w.length>0&&m.value&&!m.value.test(w)&&t.preventDefault()}}function R(t){var r;const e=t.currentTarget.value.slice(0,n.maxlength);if(e.length>0&&m.value&&!m.value.test(e)){t.preventDefault();return}typeof y.value=="string"&&e.length<y.value.length&&((r=A)==null||r.dispatchEvent(new Event("selectionchange"))),a.value=e,i("input",e)}function J(){const t=l.value;if(t){const e=Math.min(t.value.length,n.maxlength-1),r=t.value.length;t.setSelectionRange(e,r),p.value=e,g.value=r}v.value=!0}function Q(t){var j,c,_;const e=l.value;if(!e||!n.pasteTransformer&&(!k||!t.clipboardData||!e))return;const r=(j=t==null?void 0:t.clipboardData)==null?void 0:j.getData("text/plain"),o=n!=null&&n.pasteTransformer?n.pasteTransformer(r):r;t.preventDefault();const u=(c=l.value)==null?void 0:c.selectionStart,w=(_=l.value)==null?void 0:_.selectionEnd,b=(u!==w?a.value.slice(0,u)+o+a.value.slice(w):a.value.slice(0,u)+o+a.value.slice(u)).slice(0,n.maxlength);if(b.length>0&&m.value&&!m.value.test(b))return;a.value=b,i("input",b);const H=Math.min(b.length,n.maxlength-1),O=b.length;e==null||e.setSelectionRange(H,O),p.value=H,g.value=O}const Se=ee(Y(n,"containerClass","value","pattern","defaultValue","pushPasswordManagerStrategy","noScriptCssFallback","modelValue")),we=V(()=>({position:"relative",cursor:n.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"})),xe=V(()=>({position:"absolute",inset:0,width:E.willPushPWMBadge.value?`calc(100% + ${E.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:E.willPushPWMBadge.value?`inset(0 ${E.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:n.textAlign,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"})),ae=V(()=>({slots:Array.from({length:Number(n.maxlength)}).map((t,e)=>{var u;const r=v.value&&p.value!==null&&g.value!==null&&(p.value===g.value&&e===p.value||e>=p.value&&e<g.value),o=a.value[e]!==void 0?a.value[e]:null;return{char:o,placeholderChar:o??((u=n==null?void 0:n.placeholder)==null?void 0:u[e])??null,isActive:r,hasFakeCaret:r&&o===null}}),isFocused:v.value,isHovering:!n.disabled&&S.value}));return Ae(be,ae),f(Object.defineProperty({},"$el",{enumerable:!0,configurable:!0,get:()=>l})),(t,e)=>{var r;return W(),U(Fe,null,[s.noScriptCssFallback!==null?(W(),ge(x(qe),{key:0,fallback:s.noScriptCssFallback},null,8,["fallback"])):he("v-if",!0),K("div",{ref_key:"containerRef",ref:h,"data-input-otp-container":"",style:De(we.value),class:Re(s.containerClass)},[ne(t.$slots,"default",{slots:ae.value.slots,isFocused:v.value,isHovering:!s.disabled&&S.value}),K("div",Qe,[K("input",X({ref_key:"inputRef",ref:l,value:x(a),"data-input-otp":"","data-input-otp-placeholder-shown":x(a).length===0||void 0,"data-input-otp-mss":p.value,"data-input-otp-mse":g.value,"aria-placeholder":s.placeholder,style:xe.value,pattern:(r=m.value)==null?void 0:r.source},{...t.$attrs,...x(Se)},{onBeforeinput:$,onMouseover:e[0]||(e[0]=o=>{S.value=!0,i("mouseover",o)}),onMouseleave:e[1]||(e[1]=o=>{S.value=!1,i("mouseleave",o)}),onPaste:e[2]||(e[2]=o=>{Q(o),i("paste",o)}),onInput:R,onFocus:e[3]||(e[3]=o=>{J(),i("focus",o)}),onBlur:e[4]||(e[4]=o=>{v.value=!1,i("blur",o)})}),null,16,Ze)])],6)],64)}}});var tt=et;function nt(){return Ie(be)}const ut=z({__name:"InputOTP",props:{maxlength:{},textAlign:{},inputmode:{},containerClass:{},pushPasswordManagerStrategy:{},noScriptCssFallback:{},defaultValue:{},pasteTransformer:{type:Function},accept:{},alt:{},autocomplete:{},autofocus:{type:Boolean},capture:{type:[Boolean,String]},checked:{type:[Boolean,Array,Set]},crossorigin:{},disabled:{type:Boolean},enterKeyHint:{},form:{},formaction:{},formenctype:{},formmethod:{},formnovalidate:{type:Boolean},formtarget:{},height:{},indeterminate:{type:Boolean},list:{},max:{},min:{},minlength:{},multiple:{type:Boolean},name:{},pattern:{},placeholder:{},readonly:{type:Boolean},required:{type:Boolean},size:{},src:{},step:{},type:{},value:{},width:{},class:{}},emits:["complete","change","select","input","focus","blur","mouseover","mouseleave","paste"],setup(s,{emit:f}){const d=s,n=f,i=Y(d,"class"),a=Te(i,n);return(y,m)=>(W(),ge(x(tt),X(x(a),{"container-class":x(te)("flex items-center gap-2 has-disabled:opacity-50",d.class),"data-slot":"input-otp",class:"disabled:cursor-not-allowed"}),{default:We(S=>[ne(y.$slots,"default",$e(He(S)))]),_:3},16,["container-class"]))}}),ct=z({__name:"InputOTPGroup",props:{class:{}},setup(s){const f=s,d=Y(f,"class"),n=ee(d);return(i,a)=>(W(),U("div",X({"data-slot":"input-otp-group"},x(n),{class:x(te)("flex items-center",f.class)}),[ne(i.$slots,"default")],16))}}),at=["data-active"],ot={key:0,class:"pointer-events-none absolute inset-0 flex items-center justify-center"},pt=z({__name:"InputOTPSlot",props:{index:{},class:{}},setup(s){const f=s,d=Y(f,"class"),n=ee(d),i=nt(),a=V(()=>i==null?void 0:i.value.slots[f.index]);return(y,m)=>{var S,v,p;return W(),U("div",X(x(n),{"data-slot":"input-otp-slot","data-active":(S=a.value)==null?void 0:S.isActive,class:x(te)("data-[active=true]:border-ring data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:ring-destructive/20 dark:data-[active=true]:aria-invalid:ring-destructive/40 aria-invalid:border-destructive data-[active=true]:aria-invalid:border-destructive dark:bg-input/30 border-input relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md data-[active=true]:z-10 data-[active=true]:ring-[3px]",f.class)}),[Oe(je((v=a.value)==null?void 0:v.char)+" ",1),(p=a.value)!=null&&p.hasFakeCaret?(W(),U("div",ot,[...m[0]||(m[0]=[K("div",{class:"animate-caret-blink bg-foreground h-4 w-px duration-1000"},null,-1)])])):he("",!0)],16,at)}}});export{ut as _,ct as a,pt as b};
